!function(r){function n(r){return r}function t(r,n,t){for(var e=0,i=n.length,o=t?JSON.parse(JSON.stringify(r)):Array(i);i>e;++e)o[e]=r[n[e]];return o}function e(r){function n(n,t,e,i){for(;i>e;){var o=e+i>>>1;r(n[o])<t?e=o+1:i=o}return e}function t(n,t,e,i){for(;i>e;){var o=e+i>>>1;t<r(n[o])?i=o:e=o+1}return e}return t.right=t,t.left=n,t}function o(r){function n(r,n,t){for(var i=t-n,o=(i>>>1)+1;--o>0;)e(r,o,i,n);return r}function t(r,n,t){for(var i,o=t-n;--o>0;)i=r[n],r[n]=r[n+o],r[n+o]=i,e(r,1,o,n);return r}function e(n,t,e,i){for(var o,u=n[--i+t],f=r(u);(o=t<<1)<=e&&(e>o&&r(n[i+o])>r(n[i+o+1])&&o++,!(f<=r(n[i+o])));)n[i+t]=n[i+o],t=o;n[i+t]=u}return n.sort=t,n}function u(r){function n(n,e,i,o){var u,f,a,l,s=Array(o=Math.min(i-e,o));for(f=0;o>f;++f)s[f]=n[e++];if(t(s,0,o),i>e){u=r(s[0]);do(a=r(l=n[e])>u)&&(s[0]=l,u=r(t(s,0,o)[0]));while(++e<i)}return s}var t=o(r);return n}function f(r){function n(n,t,e){for(var i=t+1;e>i;++i){for(var o=i,u=n[i],f=r(u);o>t&&r(n[o-1])>f;--o)n[o]=n[o-1];n[o]=u}return n}return n}function a(r){function n(r,n,i){return(J>i-n?e:t)(r,n,i)}function t(t,e,i){var o,u=0|(i-e)/6,f=e+u,a=i-1-u,l=e+i-1>>1,s=l-u,c=l+u,h=t[f],v=r(h),p=t[s],g=r(p),d=t[l],y=r(d),b=t[c],x=r(b),k=t[a],m=r(k);v>g&&(o=h,h=p,p=o,o=v,v=g,g=o),x>m&&(o=b,b=k,k=o,o=x,x=m,m=o),v>y&&(o=h,h=d,d=o,o=v,v=y,y=o),g>y&&(o=p,p=d,d=o,o=g,g=y,y=o),v>x&&(o=h,h=b,b=o,o=v,v=x,x=o),y>x&&(o=d,d=b,b=o,o=y,y=x,x=o),g>m&&(o=p,p=k,k=o,o=g,g=m,m=o),g>y&&(o=p,p=d,d=o,o=g,g=y,y=o),x>m&&(o=b,b=k,k=o,o=x,x=m,m=o);var z=p,E=g,w=b,A=x;t[f]=h,t[s]=t[e],t[l]=d,t[c]=t[i-1],t[a]=k;var O=e+1,M=i-2,N=A>=E&&E>=A;if(N)for(var C=O;M>=C;++C){var S=t[C],U=r(S);if(E>U)C!==O&&(t[C]=t[O],t[O]=S),++O;else if(U>E)for(;;){var _=r(t[M]);{if(!(_>E)){if(E>_){t[C]=t[O],t[O++]=t[M],t[M--]=S;break}t[C]=t[M],t[M--]=S;break}M--}}}else for(var C=O;M>=C;C++){var S=t[C],U=r(S);if(E>U)C!==O&&(t[C]=t[O],t[O]=S),++O;else if(U>A)for(;;){var _=r(t[M]);{if(!(_>A)){E>_?(t[C]=t[O],t[O++]=t[M],t[M--]=S):(t[C]=t[M],t[M--]=S);break}if(M--,C>M)break}}}if(t[e]=t[O-1],t[O-1]=z,t[i-1]=t[M+1],t[M+1]=w,n(t,e,O-1),n(t,M+2,i),N)return t;if(f>O&&M>a){for(var J,_;(J=r(t[O]))<=E&&J>=E;)++O;for(;(_=r(t[M]))<=A&&_>=A;)--M;for(var C=O;M>=C;C++){var S=t[C],U=r(S);if(E>=U&&U>=E)C!==O&&(t[C]=t[O],t[O]=S),O++;else if(A>=U&&U>=A)for(;;){var _=r(t[M]);{if(!(A>=_&&_>=A)){E>_?(t[C]=t[O],t[O++]=t[M],t[M--]=S):(t[C]=t[M],t[M--]=S);break}if(M--,C>M)break}}}}return n(t,O,M+1)}var e=f(r);return n}function s(r){for(var n=Array(r),t=-1;++t<r;)n[t]=0;return n}function c(r,n){for(var t=r.length;n>t;)r[t++]=0;return r}function h(r,n){if(n>32)throw Error("invalid array width!");return r}function v(r){this.length=r,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=q(r)}function p(r,n){return function(t){var e=t.length;return[r.left(t,n,0,e),r.right(t,n,0,e)]}}function g(r,n){var t=n[0],e=n[1];return function(n){var i=n.length;return[r.left(n,t,0,i),r.left(n,e,0,i)]}}function d(r){return[0,r.length]}function y(){return null}function b(){return 0}function x(r){return r+1}function m(r){return r-1}function z(r){return function(n,t){return n+ +r(t)}}function E(r){return function(n,t){return n-r(t)}}function w(){function r(r){var n=J,t=r.length;return t&&(_=_.concat(r),S.lengthen(J+=t),F.forEach(function(e){e(r,n,t)}),C()),U}function e(){for(var r=A(J,J),n=[],t=0,e=0;J>t;++t)S.zero(t)?n.push(t):r[t]=e++;q.forEach(function(r){r(-1,-1,[],n,!0)}),R.forEach(function(n){n(r)});for(var t=0,e=0;J>t;++t)S.zero(t)||(t!==e&&(S.copy(e,t),_[e]=_[t]),++e);_.length=J=e,S.truncate(e),C()}function f(r,e){function f(n,o,u){if(e){for(pn=0,p=0,k=[],i=0;i<n.length;i++)for(p=0,k=r(n[i]);p<k.length;p++)pn++;rn=[],en=O(n.length),on=[];var f=O(pn);for(l=0,i=0;i<n.length;i++)if(k=r(n[i]),k.length)for(en[i]=k.length,p=0;p<k.length;p++)rn.push(k[p]),f[l]=i,l++;else en[i]=0,on.push(i);var a=an(O(pn),0,pn);rn=t(rn,a),nn=t(f,a)}else rn=n.map(r),nn=an(O(u),0,u),rn=t(rn,nn);var s=ln(rn),c=s[0],h=s[1];if(un)for(i=0;u>i;++i)un(rn[i],i)||(S[W][nn[i]+o]|=T);else{for(i=0;c>i;++i)S[W][nn[i]+o]|=T;for(i=h;u>i;++i)S[W][nn[i]+o]|=T}if(!o)return X=rn,Y=nn,tn=en,hn=c,vn=h,void 0;if(Z=X,$=Y,i0=0,i1=0,e&&(old_n0=o,o=Z.length,u=pn),X=e?Array(o+u):Array(J),Y=e?Array(o+u):A(J,J),e){var v=tn.length;tn=j(tn,J);for(var p=0;J>p+v;p++)tn[p+v]=en[p]}for(i=0;o>i0&&u>i1;++i)Z[i0]<rn[i1]?(X[i]=Z[i0],Y[i]=$[i0++]):(X[i]=rn[i1],Y[i]=nn[i1++]+(e?old_n0:o));for(;o>i0;++i0,++i)X[i]=Z[i0],Y[i]=$[i0];for(;u>i1;++i1,++i)X[i]=rn[i1],Y[i]=nn[i1]+(e?old_n0:o);s=ln(X),hn=s[0],vn=s[1]}function s(r,n,t){sn.forEach(function(r){r(rn,nn,n,t)}),rn=nn=null}function c(r){for(var n,t=0,e=0;J>t;++t)S.zero(n=Y[t])||(t!==e&&(X[e]=X[t]),Y[e]=r[n],++e);for(X.length=e;J>e;)Y[e++]=0;var i=ln(X);hn=i[0],vn=i[1]}function h(r){var n=r[0],t=r[1];if(un)return un=null,H(function(r,e){return e>=n&&t>e}),hn=n,vn=t,fn;var i,o,u,f=[],a=[];if(hn>n)for(i=n,o=Math.min(hn,t);o>i;++i)f.push(Y[i]);else if(n>hn)for(i=hn,o=Math.min(n,vn);o>i;++i)a.push(Y[i]);if(t>vn)for(i=Math.max(n,vn),o=t;o>i;++i)f.push(Y[i]);else if(vn>t)for(i=Math.max(hn,t),o=vn;o>i;++i)a.push(Y[i]);if(e){var l=[],s=[];for(i=0;i<f.length;i++)tn[f[i]]++,1===tn[f[i]]&&(S[W][f[i]]^=T,l.push(f[i]));for(i=0;i<a.length;i++)tn[a[i]]--,0===tn[a[i]]&&(S[W][a[i]]^=T,s.push(a[i]));if(f=l,a=s,0===r[0]&&r[1]===Y.length)for(i=0;i<on.length;i++)S[W][u=on[i]]&T&&(S[W][u]^=T,f.push(u));else for(i=0;i<on.length;i++)S[W][u=on[i]]&T||(S[W][u]^=T,a.push(u))}else{for(i=0;i<f.length;i++)S[W][f[i]]^=T;for(i=0;i<a.length;i++)S[W][a[i]]^=T}return hn=n,vn=t,q.forEach(function(r){r(T,W,f,a)}),C(),fn}function v(r){return null==r?D():Array.isArray(r)?U(r):"function"==typeof r?G(r):w(r)}function w(r){return h((ln=p(N,r))(X))}function U(r){return h((ln=g(N,r))(X))}function D(){return h((ln=d)(X))}function G(r){return ln=d,H(un=r),hn=0,vn=J,fn}function H(r){var n,t,i,o=[],u=[],f=Y.length;for(n=0;f>n;++n)void 0!==(t=Y[n])&&!(S[W][t]&T)^!!(i=r(X[n],n))&&(i?o.push(t):u.push(t));if(e){var a=[],l=[];for(n=0;n<o.length;n++)tn[o[n]]++,1===tn[o[n]]&&(S[W][o[n]]&=V,a.push(o[n]));for(n=0;n<u.length;n++)tn[u[n]]--,0===tn[u[n]]&&(S[W][u[n]]|=T,l.push(u[n]));for(o=a,u=l,n=0;n<on.length;n++)S[W][t=on[n]]&T||(S[W][t]^=T,u.push(t))}else{for(n=0;n<o.length;n++)S[W][o[n]]&=V;for(n=0;n<u.length;n++)S[W][u[n]]|=T}q.forEach(function(r){r(T,W,o,u)}),C()}function I(r){for(var n,t=[],i=vn;--i>=hn&&r>0;)S.zero(n=Y[i])&&(t.push(_[n]),--r);if(e)for(i=0;i<on.length&&r>0;i++)S.zero(n=on[i])&&(t.push(_[n]),--r);return t}function K(r){var n,t,i=[];if(e)for(n=0;n<on.length&&r>0;n++)S.zero(t=on[n])&&(i.push(_[t]),--r);for(n=hn;vn>n&&r>0;)S.zero(t=Y[n])&&(i.push(_[t]),--r),n++;return i}function L(r){function f(n,o,u,f){function a(){return e?(Z++,void 0):(++Z===Q&&(m=B(m,P<<=1),D=B(D,P),Q=M(P)),void 0)}e&&(n0old=u,u=X.length-n.length,f=n.length);var v,p,g,d,b,x,k=F,m=e?[]:A(Z,Q),z=I,E=K,w=L,O=Z,N=0,C=0;for(nn&&(z=w=y),nn&&(E=w=y),F=Array(Z),Z=0,D=e?O>1?D:[]:O>1?j(D,J):A(J,Q),O&&(g=(p=k[0]).key);f>C&&!((d=r(n[C]))>=d);)++C;for(;f>C;){for(p&&d>=g?(b=p,x=g,m[N]=Z,(p=k[++N])&&(g=p.key)):(b={key:d,value:w()},x=d),F[Z]=b;x>=d&&(v=o[C]+(e?n0old:u),e?D[v]?D[v].push(Z):D[v]=[Z]:D[v]=Z,b.value=z(b.value,_[v],!0),S.zeroExcept(v,W,V)||(b.value=E(b.value,_[v],!1)),!(++C>=f));)d=r(n[C]);a()}for(;O>N;)F[m[N]=Z]=k[N++],a();if(e)for(i=0;i<D.length;i++)D[i]||(D[i]=[]);if(Z>N)if(e)D=t(D,m,!0);else for(N=0;u>N;++N)D[N]=m[D[N]];v=q.indexOf($),Z>1?($=l,rn=c):(!Z&&tn&&(Z=1,F=[{key:null,value:w()}]),1===Z?($=s,rn=h):($=y,rn=y),D=null),q[v]=$}function a(){if(Z>1){for(var r=Z,n=F,t=A(r,r),e=0,i=0;J>e;++e)S.zero(e)||(t[D[i]=D[e]]=1,++i);for(F=[],Z=0,e=0;r>e;++e)t[e]&&(t[e]=Z++,F.push(n[e]));if(Z>1)for(var e=0;i>e;++e)D[e]=t[D[e]];else D=null;q[q.indexOf($)]=Z>1?(rn=c,$=l):1===Z?(rn=h,$=s):rn=$=y}else if(1===Z){if(tn)return;for(var e=0;J>e;++e)if(!S.zero(e))return;F=[],Z=0,q[q.indexOf($)]=$=rn=y}}function l(r,n,t,i,o){if(!(r===T&&n===W||nn)){var u,f,a,l,s;if(e){for(u=0,l=t.length;l>u;++u)if(S.zeroExcept(a=t[u],W,V))for(f=0;f<D[a].length;f++)s=F[D[a][f]],s.value=I(s.value,_[a],!1,f);for(u=0,l=i.length;l>u;++u)if(S.onlyExcept(a=i[u],W,V,n,r))for(f=0;f<D[a].length;f++)s=F[D[a][f]],s.value=K(s.value,_[a],o,f)}else{for(u=0,l=t.length;l>u;++u)S.zeroExcept(a=t[u],W,V)&&(s=F[D[a]],s.value=I(s.value,_[a],!1));for(u=0,l=i.length;l>u;++u)S.onlyExcept(a=i[u],W,V,n,r)&&(s=F[D[a]],s.value=K(s.value,_[a],o))}}}function s(r,n,t,e,i){if(!(r===T&&n===W||nn)){var o,u,f,a=F[0];for(o=0,f=t.length;f>o;++o)S.zeroExcept(u=t[o],W,V)&&(a.value=I(a.value,_[u],!1));for(o=0,f=e.length;f>o;++o)S.onlyExcept(u=e[o],W,V,n,r)&&(a.value=K(a.value,_[u],i))}}function c(){var r,n,t;for(r=0;Z>r;++r)F[r].value=L();if(e){for(r=0;J>r;++r)for(n=0;n<D[r].length;n++)t=F[D[r][n]],t.value=I(t.value,_[r],!0,n);for(r=0;J>r;++r)if(!S.zeroExcept(r,W,V))for(n=0;n<D[r].length;n++)t=F[D[r][n]],t.value=K(t.value,_[r],!1,n)}else{for(r=0;J>r;++r)t=F[D[r]],t.value=I(t.value,_[r],!0);for(r=0;J>r;++r)S.zeroExcept(r,W,V)||(t=F[D[r]],t.value=K(t.value,_[r],!1))}}function h(){var r,n=F[0];for(n.value=L(),r=0;J>r;++r)n.value=I(n.value,_[r],!0);for(r=0;J>r;++r)S.zeroExcept(r,W,V)||(n.value=K(n.value,_[r],!1))}function v(){return nn&&(rn(),nn=!1),F}function p(r){var n=G(v(),0,F.length,r);return H.sort(n,0,n.length)}function g(r,n,t){return I=r,K=n,L=t,nn=!0,U}function d(){return g(x,m,b)}function k(r){return g(z(r),E(r),b)}function w(r){function n(n){return r(n.value)}return G=u(n),H=o(n),U}function O(){return w(n)}function N(){return Z}function C(){var r=q.indexOf($);return r>=0&&q.splice(r,1),r=sn.indexOf(f),r>=0&&sn.splice(r,1),r=R.indexOf(a),r>=0&&R.splice(r,1),U}var U={top:p,all:v,reduce:g,reduceCount:d,reduceSum:k,order:w,orderNatural:O,size:N,dispose:C,remove:C};cn.push(U);var F,D,G,H,I,K,L,P=8,Q=M(P),Z=0,$=y,rn=y,nn=!0,tn=r===y;return arguments.length<1&&(r=n),q.push($),sn.push(f),R.push(a),f(X,Y,0,J),d().orderNatural()}function P(){var r=L(y),n=r.all;return delete r.all,delete r.top,delete r.order,delete r.orderNatural,delete r.size,r.value=function(){return n()[0].value},r}function Q(){cn.forEach(function(r){r.dispose()});var r=F.indexOf(f);return r>=0&&F.splice(r,1),r=F.indexOf(s),r>=0&&F.splice(r,1),r=R.indexOf(c),r>=0&&R.splice(r,1),S.masks[W]&=V,D()}var T,V,W,X,Y,Z,$,rn,nn,tn,en,on,un,fn={filter:v,filterExact:w,filterRange:U,filterFunction:G,filterAll:D,top:I,bottom:K,group:L,groupAll:P,dispose:Q,remove:Q},an=a(function(r){return rn[r]}),ln=d,sn=[],cn=[],hn=0,vn=0,pn=0;F.unshift(f),F.push(s),R.push(c);var gn=S.add();return W=gn.offset,T=gn.one,V=~T,f(_,0,J),s(_,0,J),fn}function s(){function r(r,n){var t;if(!v)for(t=n;J>t;++t)a=l(a,_[t],!0),S.zero(t)||(a=s(a,_[t],!1))}function n(r,n,t,e,i){var o,u,f;if(!v){for(o=0,f=t.length;f>o;++o)S.zero(u=t[o])&&(a=l(a,_[u],i));for(o=0,f=e.length;f>o;++o)S.only(u=e[o],n,r)&&(a=s(a,_[u],i))}}function t(){var r;for(a=c(),r=0;J>r;++r)a=l(a,_[r],!0),S.zero(r)||(a=s(a,_[r],!1))}function e(r,n,t){return l=r,s=n,c=t,v=!0,h}function i(){return e(x,m,b)}function o(r){return e(z(r),E(r),b)}function u(){return v&&(t(),v=!1),a}function f(){var t=q.indexOf(n);return t>=0&&q.splice(t),t=F.indexOf(r),t>=0&&F.splice(t),h}var a,l,s,c,h={reduce:e,reduceCount:i,reduceSum:o,value:u,dispose:f,remove:f},v=!0;return q.push(n),F.push(r),r(_,0,J),i()}function c(){return J}function h(){return _}function w(r){return"function"!=typeof r?(console.warn("onChange callback parameter must be a function!"),void 0):(D.push(r),function(){D.splice(D.indexOf(r),1)})}function C(){for(var r=0;r<D.length;r++)D[r]()}var S,U={add:r,remove:e,dimension:f,groupAll:s,size:c,all:h,onChange:w},_=[],J=0,q=[],F=[],R=[],D=[];return S=new v(0),arguments.length?r(arguments[0]):U}function A(r,n){return(257>n?q:65537>n?F:R)(r)}function O(r){for(var n=A(r,r),t=-1;++t<r;)n[t]=t;return n}function M(r){return 8===r?256:16===r?65536:4294967296}w.version="2.0.0-alpha.03",w.permute=t;var N=w.bisect=e(n);N.by=e;var C=w.heap=o(n);C.by=o;var S=w.heapselect=u(n);S.by=u;var U=w.insertionsort=f(n);U.by=f;var _=w.quicksort=a(n);_.by=a;var J=32,q=s,F=s,R=s,j=c,B=h;"undefined"!=typeof Uint8Array&&(q=function(r){return new Uint8Array(r)},F=function(r){return new Uint16Array(r)},R=function(r){return new Uint32Array(r)},j=function(r,n){if(r.length>=n)return r;var t=new r.constructor(n);return t.set(r),t},B=function(r,n){var t;switch(n){case 16:t=F(r.length);break;case 32:t=R(r.length);break;default:throw Error("invalid array width!")}return t.set(r),t}),v.prototype.lengthen=function(r){var n,t;for(n=0,t=this.subarrays;t>n;++n)this[n]=j(this[n],r);this.length=r},v.prototype.add=function(){var r,n,t,e,i;for(e=0,i=this.subarrays;i>e;++e)if(r=this.masks[e],n=this.width-32*e,t=~r&-~r,!(n>=32)||t)return 32>n&&t&1<<n&&(this[e]=B(this[e],n<<=1),this.width=32*e+n),this.masks[e]|=t,{offset:e,one:t};return this[this.subarrays]=q(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},v.prototype.copy=function(r,n){var t,e;for(t=0,e=this.subarrays;e>t;++t)this[t][r]=this[t][n]},v.prototype.truncate=function(r){var n,t;for(n=0,t=this.subarrays;t>n;++n){for(var e=this.length-1;e>=r;e--)this[n][e]=0;this[n].length=r}this.length=r},v.prototype.zero=function(r){var n,t;for(n=0,t=this.subarrays;t>n;++n)if(this[n][r])return!1;return!0},v.prototype.zeroExcept=function(r,n,t){var e,i;for(e=0,i=this.subarrays;i>e;++e)if(e===n?this[e][r]&t:this[e][r])return!1;return!0},v.prototype.only=function(r,n,t){var e,i;for(e=0,i=this.subarrays;i>e;++e)if(this[e][r]!=(e===n?t:0))return!1;return!0},v.prototype.onlyExcept=function(r,n,t,e,i){var o,u,f;for(u=0,f=this.subarrays;f>u;++u)if(o=this[u][r],u===n&&(o&=t),o!=(u===e?i:0))return!1;return!0},r.crossfilter=w}("undefined"!=typeof exports&&exports||this);