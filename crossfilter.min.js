!function(r){function n(r){return r}function t(r,n,t){for(var e=0,i=n.length,u=t?JSON.parse(JSON.stringify(r)):Array(i);i>e;++e)u[e]=r[n[e]];return u}function e(r){function n(n,t,e,i){for(;i>e;){var u=e+i>>>1;r(n[u])<t?e=u+1:i=u}return e}function t(n,t,e,i){for(;i>e;){var u=e+i>>>1;t<r(n[u])?i=u:e=u+1}return e}return t.right=t,t.left=n,t}function u(r){function n(r,n,t){for(var i=t-n,u=(i>>>1)+1;--u>0;)e(r,u,i,n);return r}function t(r,n,t){for(var i,u=t-n;--u>0;)i=r[n],r[n]=r[n+u],r[n+u]=i,e(r,1,u,n);return r}function e(n,t,e,i){for(var u,o=n[--i+t],f=r(o);(u=t<<1)<=e&&(e>u&&r(n[i+u])>r(n[i+u+1])&&u++,!(f<=r(n[i+u])));)n[i+t]=n[i+u],t=u;n[i+t]=o}return n.sort=t,n}function o(r){function n(n,e,i,u){var o,f,a,l,s=Array(u=Math.min(i-e,u));for(f=0;u>f;++f)s[f]=n[e++];if(t(s,0,u),i>e){o=r(s[0]);do(a=r(l=n[e])>o)&&(s[0]=l,o=r(t(s,0,u)[0]));while(++e<i)}return s}var t=u(r);return n}function f(r){function n(n,t,e){for(var i=t+1;e>i;++i){for(var u=i,o=n[i],f=r(o);u>t&&r(n[u-1])>f;--u)n[u]=n[u-1];n[u]=o}return n}return n}function a(r){function n(r,n,i){return(J>i-n?e:t)(r,n,i)}function t(t,e,i){var u,o=0|(i-e)/6,f=e+o,a=i-1-o,l=e+i-1>>1,s=l-o,h=l+o,c=t[f],v=r(c),p=t[s],g=r(p),d=t[l],y=r(d),b=t[h],x=r(b),k=t[a],m=r(k);v>g&&(u=c,c=p,p=u,u=v,v=g,g=u),x>m&&(u=b,b=k,k=u,u=x,x=m,m=u),v>y&&(u=c,c=d,d=u,u=v,v=y,y=u),g>y&&(u=p,p=d,d=u,u=g,g=y,y=u),v>x&&(u=c,c=b,b=u,u=v,v=x,x=u),y>x&&(u=d,d=b,b=u,u=y,y=x,x=u),g>m&&(u=p,p=k,k=u,u=g,g=m,m=u),g>y&&(u=p,p=d,d=u,u=g,g=y,y=u),x>m&&(u=b,b=k,k=u,u=x,x=m,m=u);var z=p,E=g,A=b,w=x;t[f]=c,t[s]=t[e],t[l]=d,t[h]=t[i-1],t[a]=k;var O=e+1,M=i-2,N=w>=E&&E>=w;if(N)for(var C=O;M>=C;++C){var S=t[C],U=r(S);if(E>U)C!==O&&(t[C]=t[O],t[O]=S),++O;else if(U>E)for(;;){var _=r(t[M]);{if(!(_>E)){if(E>_){t[C]=t[O],t[O++]=t[M],t[M--]=S;break}t[C]=t[M],t[M--]=S;break}M--}}}else for(var C=O;M>=C;C++){var S=t[C],U=r(S);if(E>U)C!==O&&(t[C]=t[O],t[O]=S),++O;else if(U>w)for(;;){var _=r(t[M]);{if(!(_>w)){E>_?(t[C]=t[O],t[O++]=t[M],t[M--]=S):(t[C]=t[M],t[M--]=S);break}if(M--,C>M)break}}}if(t[e]=t[O-1],t[O-1]=z,t[i-1]=t[M+1],t[M+1]=A,n(t,e,O-1),n(t,M+2,i),N)return t;if(f>O&&M>a){for(var J,_;(J=r(t[O]))<=E&&J>=E;)++O;for(;(_=r(t[M]))<=w&&_>=w;)--M;for(var C=O;M>=C;C++){var S=t[C],U=r(S);if(E>=U&&U>=E)C!==O&&(t[C]=t[O],t[O]=S),O++;else if(w>=U&&U>=w)for(;;){var _=r(t[M]);{if(!(w>=_&&_>=w)){E>_?(t[C]=t[O],t[O++]=t[M],t[M--]=S):(t[C]=t[M],t[M--]=S);break}if(M--,C>M)break}}}}return n(t,O,M+1)}var e=f(r);return n}function s(r){for(var n=Array(r),t=-1;++t<r;)n[t]=0;return n}function h(r,n){for(var t=r.length;n>t;)r[t++]=0;return r}function c(r,n){if(n>32)throw Error("invalid array width!");return r}function v(r){this.length=r,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=R(r)}function p(r,n){return function(t){var e=t.length;return[r.left(t,n,0,e),r.right(t,n,0,e)]}}function g(r,n){var t=n[0],e=n[1];return function(n){var i=n.length;return[r.left(n,t,0,i),r.left(n,e,0,i)]}}function d(r){return[0,r.length]}function y(){return null}function b(){return 0}function x(r){return r+1}function m(r){return r-1}function z(r){return function(n,t){return n+ +r(t)}}function E(r){return function(n,t){return n-r(t)}}function A(){function r(r){var n=J,t=r.length;return t&&(_=_.concat(r),S.lengthen(J+=t),q.forEach(function(e){e(r,n,t)}),C("dataAdded")),U}function e(){for(var r=w(J,J),n=[],t=0,e=0;J>t;++t)S.zero(t)?n.push(t):r[t]=e++;R.forEach(function(r){r(-1,-1,[],n,!0)}),F.forEach(function(n){n(r)});for(var t=0,e=0;J>t;++t)S.zero(t)||(t!==e&&(S.copy(e,t),_[e]=_[t]),++e);_.length=J=e,S.truncate(e),C("dataRemoved")}function f(r,e){function f(n,u,o){if(e){for(yn=0,p=0,k=[],i=0;i<n.length;i++)for(p=0,k=r(n[i]);p<k.length;p++)yn++;rn=[],en=O(n.length),on=w(yn,1),an=[];var f=O(yn);for(l=0,i=0;i<n.length;i++)if(k=r(n[i]),k.length)for(en[i]=k.length,p=0;p<k.length;p++)rn.push(k[p]),f[l]=i,l++;else en[i]=0,an.push(i);var a=hn(O(yn),0,yn);rn=t(rn,a),nn=t(f,a)}else rn=n.map(r),nn=hn(O(o),0,o),rn=t(rn,nn);e&&(o=yn);var s=cn(rn),h=s[0],c=s[1];if(ln)for(i=0;o>i;++i)ln(rn[i],i)||(S[W][nn[i]+u]|=T,e&&(on[i]=1));else{for(i=0;h>i;++i)S[W][nn[i]+u]|=T,e&&(on[i]=1);for(i=c;o>i;++i)S[W][nn[i]+u]|=T,e&&(on[i]=1)}if(!u)return X=rn,Y=nn,tn=en,un=on,gn=h,dn=c,void 0;if(Z=X,$=Y,fn=un,i0=0,i1=0,e&&(old_n0=u,u=Z.length,o=yn),X=e?Array(u+o):Array(J),Y=e?Array(u+o):w(J,J),e&&(un=w(u+o,1)),e){var v=tn.length;tn=j(tn,J);for(var p=0;J>p+v;p++)tn[p+v]=en[p]}for(i=0;u>i0&&o>i1;++i)Z[i0]<rn[i1]?(X[i]=Z[i0],e&&(un[i]=fn[i0]),Y[i]=$[i0++]):(X[i]=rn[i1],e&&(un[i]=fn[i1]),Y[i]=nn[i1++]+(e?old_n0:u));for(;u>i0;++i0,++i)X[i]=Z[i0],e&&(un[i]=fn[i0]),Y[i]=$[i0];for(;o>i1;++i1,++i)X[i]=rn[i1],e&&(un[i]=fn[i1]),Y[i]=nn[i1]+(e?old_n0:u);s=cn(X),gn=s[0],dn=s[1]}function s(r,n,t){vn.forEach(function(r){r(rn,nn,n,t)}),rn=nn=null}function h(r){for(var n,t=0,e=0;J>t;++t)S.zero(n=Y[t])||(t!==e&&(X[e]=X[t]),Y[e]=r[n],++e);for(X.length=e;J>e;)Y[e++]=0;var i=cn(X);gn=i[0],dn=i[1]}function c(r){var n=r[0],t=r[1];if(ln)return ln=null,H(function(r,e){return e>=n&&t>e},0===r[0]&&r[1]===Y.length),gn=n,dn=t,sn;var i,u,o,f=[],a=[],l=[],s=[];if(gn>n)for(i=n,u=Math.min(gn,t);u>i;++i)f.push(Y[i]),l.push(i);else if(n>gn)for(i=gn,u=Math.min(n,dn);u>i;++i)a.push(Y[i]),s.push(i);if(t>dn)for(i=Math.max(n,dn),u=t;u>i;++i)f.push(Y[i]),l.push(i);else if(dn>t)for(i=Math.max(gn,t),u=dn;u>i;++i)a.push(Y[i]),s.push(i);if(e){var h=[],c=[];for(i=0;i<f.length;i++)tn[f[i]]++,un[l[i]]=0,1===tn[f[i]]&&(S[W][f[i]]^=T,h.push(f[i]));for(i=0;i<a.length;i++)tn[a[i]]--,un[s[i]]=1,0===tn[a[i]]&&(S[W][a[i]]^=T,c.push(a[i]));if(f=h,a=c,0===r[0]&&r[1]===Y.length)for(i=0;i<an.length;i++)S[W][o=an[i]]&T&&(S[W][o]^=T,f.push(o));else for(i=0;i<an.length;i++)S[W][o=an[i]]&T||(S[W][o]^=T,a.push(o))}else{for(i=0;i<f.length;i++)S[W][f[i]]^=T;for(i=0;i<a.length;i++)S[W][a[i]]^=T}return gn=n,dn=t,R.forEach(function(r){r(T,W,f,a)}),C("filtered"),sn}function v(r){return null==r?D():Array.isArray(r)?U(r):"function"==typeof r?G(r):A(r)}function A(r){return c((cn=p(N,r))(X))}function U(r){return c((cn=g(N,r))(X))}function D(){return c((cn=d)(X))}function G(r){return cn=d,H(ln=r,!1),gn=0,dn=J,sn}function H(r,n){var t,i,u,o=[],f=[],a=[],l=[],s=Y.length;if(!e)for(t=0;s>t;++t)!(S[W][i=Y[t]]&T)^!!(u=r(X[t],t))&&(u?o.push(i):f.push(i));if(e)for(t=0;s>t;++t)r(X[t],t)?(o.push(Y[t]),a.push(t)):(f.push(Y[t]),l.push(t));if(e){var h=[],c=[];for(t=0;t<o.length;t++)1===un[a[t]]&&(tn[o[t]]++,un[a[t]]=0,1===tn[o[t]]&&(S[W][o[t]]^=T,h.push(o[t])));for(t=0;t<f.length;t++)0===un[l[t]]&&(tn[f[t]]--,un[l[t]]=1,0===tn[f[t]]&&(S[W][f[t]]^=T,c.push(f[t])));if(o=h,f=c,n)for(t=0;t<an.length;t++)S[W][i=an[t]]&T&&(S[W][i]^=T,o.push(i));else for(t=0;t<an.length;t++)S[W][i=an[t]]&T||(S[W][i]^=T,f.push(i))}else{for(t=0;t<o.length;t++)S[W][o[t]]&T&&(S[W][o[t]]&=V);for(t=0;t<f.length;t++)S[W][f[t]]&T||(S[W][f[t]]|=T)}R.forEach(function(r){r(T,W,o,f)}),C("filtered")}function I(r){for(var n,t=[],i=dn;--i>=gn&&r>0;)S.zero(n=Y[i])&&(t.push(_[n]),--r);if(e)for(i=0;i<an.length&&r>0;i++)S.zero(n=an[i])&&(t.push(_[n]),--r);return t}function K(r){var n,t,i=[];if(e)for(n=0;n<an.length&&r>0;n++)S.zero(t=an[n])&&(i.push(_[t]),--r);for(n=gn;dn>n&&r>0;)S.zero(t=Y[n])&&(i.push(_[t]),--r),n++;return i}function L(r){function f(n,u,o,f){function a(){return e?(Z++,void 0):(++Z===Q&&(m=B(m,P<<=1),D=B(D,P),Q=M(P)),void 0)}e&&(n0old=o,o=X.length-n.length,f=n.length);var v,p,g,d,b,x,k=q,m=e?[]:w(Z,Q),z=I,E=K,A=L,O=Z,N=0,C=0;for(nn&&(z=A=y),nn&&(E=A=y),q=Array(Z),Z=0,D=e?O>1?D:[]:O>1?j(D,J):w(J,Q),O&&(g=(p=k[0]).key);f>C&&!((d=r(n[C]))>=d);)++C;for(;f>C;){for(p&&d>=g?(b=p,x=g,m[N]=Z,(p=k[++N])&&(g=p.key)):(b={key:d,value:A()},x=d),q[Z]=b;x>=d&&(v=u[C]+(e?n0old:o),e?D[v]?D[v].push(Z):D[v]=[Z]:D[v]=Z,b.value=z(b.value,_[v],!0),S.zeroExcept(v,W,V)||(b.value=E(b.value,_[v],!1)),!(++C>=f));)d=r(n[C]);a()}for(;O>N;)q[m[N]=Z]=k[N++],a();if(e)for(i=0;J>i;i++)D[i]||(D[i]=[]);if(Z>N)if(e)D=t(D,m,!0);else for(N=0;o>N;++N)D[N]=m[D[N]];v=R.indexOf($),Z>1?($=l,rn=h):(!Z&&tn&&(Z=1,q=[{key:null,value:A()}]),1===Z?($=s,rn=c):($=y,rn=y),D=null),R[v]=$}function a(){if(Z>1){for(var r=Z,n=q,t=w(r,r),e=0,i=0;J>e;++e)S.zero(e)||(t[D[i]=D[e]]=1,++i);for(q=[],Z=0,e=0;r>e;++e)t[e]&&(t[e]=Z++,q.push(n[e]));if(Z>1)for(var e=0;i>e;++e)D[e]=t[D[e]];else D=null;R[R.indexOf($)]=Z>1?(rn=h,$=l):1===Z?(rn=c,$=s):rn=$=y}else if(1===Z){if(tn)return;for(var e=0;J>e;++e)if(!S.zero(e))return;q=[],Z=0,R[R.indexOf($)]=$=rn=y}}function l(r,n,t,i,u){if(!(r===T&&n===W||nn)){var o,f,a,l,s;if(e){for(o=0,l=t.length;l>o;++o)if(S.zeroExcept(a=t[o],W,V))for(f=0;f<D[a].length;f++)s=q[D[a][f]],s.value=I(s.value,_[a],!1,f);for(o=0,l=i.length;l>o;++o)if(S.onlyExcept(a=i[o],W,V,n,r))for(f=0;f<D[a].length;f++)s=q[D[a][f]],s.value=K(s.value,_[a],u,f)}else{for(o=0,l=t.length;l>o;++o)S.zeroExcept(a=t[o],W,V)&&(s=q[D[a]],s.value=I(s.value,_[a],!1));for(o=0,l=i.length;l>o;++o)S.onlyExcept(a=i[o],W,V,n,r)&&(s=q[D[a]],s.value=K(s.value,_[a],u))}}}function s(r,n,t,e,i){if(!(r===T&&n===W||nn)){var u,o,f,a=q[0];for(u=0,f=t.length;f>u;++u)S.zeroExcept(o=t[u],W,V)&&(a.value=I(a.value,_[o],!1));for(u=0,f=e.length;f>u;++u)S.onlyExcept(o=e[u],W,V,n,r)&&(a.value=K(a.value,_[o],i))}}function h(){var r,n,t;for(r=0;Z>r;++r)q[r].value=L();if(e){for(r=0;J>r;++r)for(n=0;n<D[r].length;n++)t=q[D[r][n]],t.value=I(t.value,_[r],!0,n);for(r=0;J>r;++r)if(!S.zeroExcept(r,W,V))for(n=0;n<D[r].length;n++)t=q[D[r][n]],t.value=K(t.value,_[r],!1,n)}else{for(r=0;J>r;++r)t=q[D[r]],t.value=I(t.value,_[r],!0);for(r=0;J>r;++r)S.zeroExcept(r,W,V)||(t=q[D[r]],t.value=K(t.value,_[r],!1))}}function c(){var r,n=q[0];for(n.value=L(),r=0;J>r;++r)n.value=I(n.value,_[r],!0);for(r=0;J>r;++r)S.zeroExcept(r,W,V)||(n.value=K(n.value,_[r],!1))}function v(){return nn&&(rn(),nn=!1),q}function p(r){var n=G(v(),0,q.length,r);return H.sort(n,0,n.length)}function g(r,n,t){return I=r,K=n,L=t,nn=!0,U}function d(){return g(x,m,b)}function k(r){return g(z(r),E(r),b)}function A(r){function n(n){return r(n.value)}return G=o(n),H=u(n),U}function O(){return A(n)}function N(){return Z}function C(){var r=R.indexOf($);return r>=0&&R.splice(r,1),r=vn.indexOf(f),r>=0&&vn.splice(r,1),r=F.indexOf(a),r>=0&&F.splice(r,1),U}var U={top:p,all:v,reduce:g,reduceCount:d,reduceSum:k,order:A,orderNatural:O,size:N,dispose:C,remove:C};pn.push(U);var q,D,G,H,I,K,L,P=8,Q=M(P),Z=0,$=y,rn=y,nn=!0,tn=r===y;return arguments.length<1&&(r=n),R.push($),vn.push(f),F.push(a),f(X,Y,0,J),d().orderNatural()}function P(){var r=L(y),n=r.all;return delete r.all,delete r.top,delete r.order,delete r.orderNatural,delete r.size,r.value=function(){return n()[0].value},r}function Q(){pn.forEach(function(r){r.dispose()});var r=q.indexOf(f);return r>=0&&q.splice(r,1),r=q.indexOf(s),r>=0&&q.splice(r,1),r=F.indexOf(h),r>=0&&F.splice(r,1),S.masks[W]&=V,D()}var T,V,W,X,Y,Z,$,rn,nn,tn,en,un,on,fn,an,ln,sn={filter:v,filterExact:A,filterRange:U,filterFunction:G,filterAll:D,top:I,bottom:K,group:L,groupAll:P,dispose:Q,remove:Q},hn=a(function(r){return rn[r]}),cn=d,vn=[],pn=[],gn=0,dn=0,yn=0;q.unshift(f),q.push(s),F.push(h);var bn=S.add();return W=bn.offset,T=bn.one,V=~T,f(_,0,J),s(_,0,J),sn}function s(){function r(r,n){var t;if(!v)for(t=n;J>t;++t)a=l(a,_[t],!0),S.zero(t)||(a=s(a,_[t],!1))}function n(r,n,t,e,i){var u,o,f;if(!v){for(u=0,f=t.length;f>u;++u)S.zero(o=t[u])&&(a=l(a,_[o],i));for(u=0,f=e.length;f>u;++u)S.only(o=e[u],n,r)&&(a=s(a,_[o],i))}}function t(){var r;for(a=h(),r=0;J>r;++r)a=l(a,_[r],!0),S.zero(r)||(a=s(a,_[r],!1))}function e(r,n,t){return l=r,s=n,h=t,v=!0,c}function i(){return e(x,m,b)}function u(r){return e(z(r),E(r),b)}function o(){return v&&(t(),v=!1),a}function f(){var t=R.indexOf(n);return t>=0&&R.splice(t),t=q.indexOf(r),t>=0&&q.splice(t),c}var a,l,s,h,c={reduce:e,reduceCount:i,reduceSum:u,value:o,dispose:f,remove:f},v=!0;return R.push(n),q.push(r),r(_,0,J),i()}function h(){return J}function c(){return _}function A(r){return"function"!=typeof r?(console.warn("onChange callback parameter must be a function!"),void 0):(D.push(r),function(){D.splice(D.indexOf(r),1)})}function C(r){for(var n=0;n<D.length;n++)D[n](r)}var S,U={add:r,remove:e,dimension:f,groupAll:s,size:h,all:c,onChange:A},_=[],J=0,R=[],q=[],F=[],D=[];return S=new v(0),arguments.length?r(arguments[0]):U}function w(r,n){return(257>n?R:65537>n?q:F)(r)}function O(r){for(var n=w(r,r),t=-1;++t<r;)n[t]=t;return n}function M(r){return 8===r?256:16===r?65536:4294967296}A.version="1.4.0-alpha.01",A.permute=t;var N=A.bisect=e(n);N.by=e;var C=A.heap=u(n);C.by=u;var S=A.heapselect=o(n);S.by=o;var U=A.insertionsort=f(n);U.by=f;var _=A.quicksort=a(n);_.by=a;var J=32,R=s,q=s,F=s,j=h,B=c;"undefined"!=typeof Uint8Array&&(R=function(r){return new Uint8Array(r)},q=function(r){return new Uint16Array(r)},F=function(r){return new Uint32Array(r)},j=function(r,n){if(r.length>=n)return r;var t=new r.constructor(n);return t.set(r),t},B=function(r,n){var t;switch(n){case 16:t=q(r.length);break;case 32:t=F(r.length);break;default:throw Error("invalid array width!")}return t.set(r),t}),v.prototype.lengthen=function(r){var n,t;for(n=0,t=this.subarrays;t>n;++n)this[n]=j(this[n],r);this.length=r},v.prototype.add=function(){var r,n,t,e,i;for(e=0,i=this.subarrays;i>e;++e)if(r=this.masks[e],n=this.width-32*e,t=~r&-~r,!(n>=32)||t)return 32>n&&t&1<<n&&(this[e]=B(this[e],n<<=1),this.width=32*e+n),this.masks[e]|=t,{offset:e,one:t};return this[this.subarrays]=R(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},v.prototype.copy=function(r,n){var t,e;for(t=0,e=this.subarrays;e>t;++t)this[t][r]=this[t][n]},v.prototype.truncate=function(r){var n,t;for(n=0,t=this.subarrays;t>n;++n){for(var e=this.length-1;e>=r;e--)this[n][e]=0;this[n].length=r}this.length=r},v.prototype.zero=function(r){var n,t;for(n=0,t=this.subarrays;t>n;++n)if(this[n][r])return!1;return!0},v.prototype.zeroExcept=function(r,n,t){var e,i;for(e=0,i=this.subarrays;i>e;++e)if(e===n?this[e][r]&t:this[e][r])return!1;return!0},v.prototype.only=function(r,n,t){var e,i;for(e=0,i=this.subarrays;i>e;++e)if(this[e][r]!=(e===n?t:0))return!1;return!0},v.prototype.onlyExcept=function(r,n,t,e,i){var u,o,f;for(o=0,f=this.subarrays;f>o;++o)if(u=this[o][r],o===n&&(u&=t),u!=(o===e?i:0))return!1;return!0},r.crossfilter=A}("undefined"!=typeof exports&&exports||this);