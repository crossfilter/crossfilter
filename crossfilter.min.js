!function(r){function n(r){return r}function t(r,n,t){for(var e=0,i=n.length,o=t?JSON.parse(JSON.stringify(r)):Array(i);i>e;++e)o[e]=r[n[e]];return o}function e(r){function n(n,t,e,i){for(;i>e;){var o=e+i>>>1;r(n[o])<t?e=o+1:i=o}return e}function t(n,t,e,i){for(;i>e;){var o=e+i>>>1;t<r(n[o])?i=o:e=o+1}return e}return t.right=t,t.left=n,t}function o(r){function n(r,n,t){for(var i=t-n,o=(i>>>1)+1;--o>0;)e(r,o,i,n);return r}function t(r,n,t){for(var i,o=t-n;--o>0;)i=r[n],r[n]=r[n+o],r[n+o]=i,e(r,1,o,n);return r}function e(n,t,e,i){for(var o,u=n[--i+t],f=r(u);(o=t<<1)<=e&&(e>o&&r(n[i+o])>r(n[i+o+1])&&o++,!(f<=r(n[i+o])));)n[i+t]=n[i+o],t=o;n[i+t]=u}return n.sort=t,n}function u(r){function n(n,e,i,o){var u,f,a,l,s=Array(o=Math.min(i-e,o));for(f=0;o>f;++f)s[f]=n[e++];if(t(s,0,o),i>e){u=r(s[0]);do(a=r(l=n[e])>u)&&(s[0]=l,u=r(t(s,0,o)[0]));while(++e<i)}return s}var t=o(r);return n}function f(r){function n(n,t,e){for(var i=t+1;e>i;++i){for(var o=i,u=n[i],f=r(u);o>t&&r(n[o-1])>f;--o)n[o]=n[o-1];n[o]=u}return n}return n}function a(r){function n(r,n,i){return(J>i-n?e:t)(r,n,i)}function t(t,e,i){var o,u=0|(i-e)/6,f=e+u,a=i-1-u,l=e+i-1>>1,s=l-u,c=l+u,h=t[f],v=r(h),p=t[s],g=r(p),d=t[l],y=r(d),b=t[c],x=r(b),k=t[a],m=r(k);v>g&&(o=h,h=p,p=o,o=v,v=g,g=o),x>m&&(o=b,b=k,k=o,o=x,x=m,m=o),v>y&&(o=h,h=d,d=o,o=v,v=y,y=o),g>y&&(o=p,p=d,d=o,o=g,g=y,y=o),v>x&&(o=h,h=b,b=o,o=v,v=x,x=o),y>x&&(o=d,d=b,b=o,o=y,y=x,x=o),g>m&&(o=p,p=k,k=o,o=g,g=m,m=o),g>y&&(o=p,p=d,d=o,o=g,g=y,y=o),x>m&&(o=b,b=k,k=o,o=x,x=m,m=o);var z=p,E=g,w=b,A=x;t[f]=h,t[s]=t[e],t[l]=d,t[c]=t[i-1],t[a]=k;var O=e+1,j=i-2,M=A>=E&&E>=A;if(M)for(var N=O;j>=N;++N){var C=t[N],S=r(C);if(E>S)N!==O&&(t[N]=t[O],t[O]=C),++O;else if(S>E)for(;;){var U=r(t[j]);{if(!(U>E)){if(E>U){t[N]=t[O],t[O++]=t[j],t[j--]=C;break}t[N]=t[j],t[j--]=C;break}j--}}}else for(var N=O;j>=N;N++){var C=t[N],S=r(C);if(E>S)N!==O&&(t[N]=t[O],t[O]=C),++O;else if(S>A)for(;;){var U=r(t[j]);{if(!(U>A)){E>U?(t[N]=t[O],t[O++]=t[j],t[j--]=C):(t[N]=t[j],t[j--]=C);break}if(j--,N>j)break}}}if(t[e]=t[O-1],t[O-1]=z,t[i-1]=t[j+1],t[j+1]=w,n(t,e,O-1),n(t,j+2,i),M)return t;if(f>O&&j>a){for(var _,U;(_=r(t[O]))<=E&&_>=E;)++O;for(;(U=r(t[j]))<=A&&U>=A;)--j;for(var N=O;j>=N;N++){var C=t[N],S=r(C);if(E>=S&&S>=E)N!==O&&(t[N]=t[O],t[O]=C),O++;else if(A>=S&&S>=A)for(;;){var U=r(t[j]);{if(!(A>=U&&U>=A)){E>U?(t[N]=t[O],t[O++]=t[j],t[j--]=C):(t[N]=t[j],t[j--]=C);break}if(j--,N>j)break}}}}return n(t,O,j+1)}var e=f(r);return n}function s(r){for(var n=Array(r),t=-1;++t<r;)n[t]=0;return n}function c(r,n){for(var t=r.length;n>t;)r[t++]=0;return r}function h(r,n){if(n>32)throw Error("invalid array width!");return r}function v(r){this.length=r,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=q(r)}function p(r,n){return function(t){var e=t.length;return[r.left(t,n,0,e),r.right(t,n,0,e)]}}function g(r,n){var t=n[0],e=n[1];return function(n){var i=n.length;return[r.left(n,t,0,i),r.left(n,e,0,i)]}}function d(r){return[0,r.length]}function y(){return null}function b(){return 0}function x(r){return r+1}function m(r){return r-1}function z(r){return function(n,t){return n+ +r(t)}}function E(r){return function(n,t){return n-r(t)}}function w(){function r(r){var n=J,t=r.length;return t&&(_=_.concat(r),S.lengthen(J+=t),F.forEach(function(e){e(r,n,t)}),C()),U}function e(){for(var r=A(J,J),n=[],t=0,e=0;J>t;++t)S.zero(t)?n.push(t):r[t]=e++;q.forEach(function(r){r(-1,-1,[],n,!0)}),R.forEach(function(n){n(r)});for(var t=0,e=0;J>t;++t)S.zero(t)||(t!==e&&(S.copy(e,t),_[e]=_[t]),++e);_.length=J=e,S.truncate(e),C()}function f(r,e){function f(n,o,u){if(e){for(pn=0,j=0,k=[],i=0;i<n.length;i++)for(j=0,k=r(n[i]);j<k.length;j++)pn++;nn=[],en=O(J),on=[];var f=O(pn);for(l=0,i=0;i<n.length;i++)if(k=r(n[i]),k.length)for(en[i]=k.length,j=0;j<k.length;j++)nn.push(k[j]),f[l]=i,l++;else en[i]=0,on.push(i);var a=an(O(pn),0,pn);nn=t(nn,a),tn=t(f,a)}else nn=n.map(r),tn=an(O(u),0,u),nn=t(nn,tn);var s=ln(nn),c=s[0],h=s[1];if(un)for(i=0;u>i;++i)un(nn[i],i)||(S[X][tn[i]+o]|=V);else{for(i=0;c>i;++i)S[X][tn[i]+o]|=V;for(i=h;u>i;++i)S[X][tn[i]+o]|=V}if(!o)return Y=nn,Z=tn,hn=c,vn=h,void 0;for($=Y,rn=Z,i0=0,i1=0,e&&(old_n0=o,o=$.length,u=pn),Y=e?Array(o+u):Array(J),Z=e?Array(o+u):A(J,J),i=0;o>i0&&u>i1;++i)$[i0]<nn[i1]?(Y[i]=$[i0],Z[i]=rn[i0++]):(Y[i]=nn[i1],Z[i]=tn[i1++]+(e?old_n0:o));for(;o>i0;++i0,++i)Y[i]=$[i0],Z[i]=rn[i0];for(;u>i1;++i1,++i)Y[i]=nn[i1],Z[i]=tn[i1]+(e?old_n0:o);s=ln(Y),hn=s[0],vn=s[1]}function s(r,n,t){sn.forEach(function(r){r(nn,tn,n,t)}),nn=tn=null}function c(r){for(var n,t=0,e=0;J>t;++t)S.zero(n=Z[t])||(t!==e&&(Y[e]=Y[t]),Z[e]=r[n],++e);for(Y.length=e;J>e;)Z[e++]=0;var i=ln(Y);hn=i[0],vn=i[1]}function h(r){var n=r[0],t=r[1];if(un)return un=null,I(function(r,e){return e>=n&&t>e}),hn=n,vn=t,fn;var i,o,u,f=[],a=[];if(hn>n)for(i=n,o=Math.min(hn,t);o>i;++i)S[X][u=Z[i]]^=V,f.push(u);else if(n>hn)for(i=hn,o=Math.min(n,vn);o>i;++i)S[X][u=Z[i]]^=V,a.push(u);if(t>vn)for(i=Math.max(n,vn),o=t;o>i;++i)S[X][u=Z[i]]^=V,f.push(u);else if(vn>t)for(i=Math.max(hn,t),o=vn;o>i;++i)S[X][u=Z[i]]^=V,a.push(u);if(e){var l=[],s=[];for(i=0;i<f.length;i++)en[f[i]]++,1===en[f[i]]&&l.push(f[i]);for(i=0;i<a.length;i++)en[a[i]]--,0===en[a[i]]&&s.push(a[i]);if(f=l,a=s,0===r[0]&&r[1]===Z.length)for(i=0;i<on.length;i++)S[X][u=on[i]]&V&&(S[X][u]^=V,f.push(u));else for(i=0;i<on.length;i++)S[X][u=on[i]]&V||(S[X][u]^=V,a.push(u))}return hn=n,vn=t,q.forEach(function(r){r(V,X,f,a)}),C(),fn}function v(r){return null==r?G():Array.isArray(r)?U(r):"function"==typeof r?H(r):w(r)}function w(r){return h((ln=p(N,r))(Y))}function U(r){return h((ln=g(N,r))(Y))}function G(){return h((ln=d)(Y))}function H(r){return ln=d,I(un=r),hn=0,vn=J,fn}function I(r){var n,t,e,i=[],o=[];for(n=0;J>n;++n)void 0!==(t=Z[n])&&!(S[X][t]&V)^!!(e=r(Y[n],n))&&(e?(S[X][t]&=W,i.push(t)):(S[X][t]|=V,o.push(t)));q.forEach(function(r){r(V,X,i,o)}),C()}function K(r){for(var n,t=[],i=vn;--i>=hn&&r>0;)S.zero(n=Z[i])&&(t.push(_[n]),--r);if(e)for(i=0;i<on.length&&r>0;i++)S.zero(n=on[i])&&(t.push(_[n]),--r);return t}function L(r){var n,t,i=[];if(e)for(n=0;n<on.length&&r>0;n++)S.zero(t=on[n])&&(i.push(_[t]),--r);for(n=hn;vn>n&&r>0;)S.zero(t=Z[n])&&(i.push(_[t]),--r),n++;return i}function P(r){function f(n,o,u,f){function a(){return e?(T++,void 0):(++T===Q&&(m=D(m,P<<=1),F=D(F,P),Q=M(P)),void 0)}e&&(n0old=u,u=Y.length-n.length,f=n.length);var v,p,g,d,b,x,k=U,m=e?[]:A(T,Q),z=I,E=K,w=L,O=T,j=0,N=0;for(nn&&(z=w=y),nn&&(E=w=y),U=Array(T),T=0,F=e?O>1?F:[]:O>1?B(F,J):A(J,Q),O&&(g=(p=k[0]).key);f>N&&!((d=r(n[N]))>=d);)++N;for(;f>N;){for(p&&d>=g?(b=p,x=g,m[j]=T,(p=k[++j])&&(g=p.key)):(b={key:d,value:w()},x=d),U[T]=b;x>=d&&(v=o[N]+(e?n0old:u),e?F[v]?F[v].push(T):F[v]=[T]:F[v]=T,b.value=z(b.value,_[v],!0),S.zeroExcept(v,X,W)||(b.value=E(b.value,_[v],!1)),!(++N>=f));)d=r(n[N]);a()}for(;O>j;)U[m[j]=T]=k[j++],a();if(e)for(i=0;i<F.length;i++)F[i]||(F[i]=[]);if(T>j)if(e)F=t(F,m,!0);else for(j=0;u>j;++j)F[j]=m[F[j]];v=q.indexOf($),T>1?($=l,rn=c):(!T&&tn&&(T=1,U=[{key:null,value:w()}]),1===T?($=s,rn=h):($=y,rn=y),F=null),q[v]=$}function a(){if(T>1){for(var r=T,n=U,t=A(r,r),e=0,i=0;J>e;++e)S.zero(e)||(t[F[i]=F[e]]=1,++i);for(U=[],T=0,e=0;r>e;++e)t[e]&&(t[e]=T++,U.push(n[e]));if(T>1)for(var e=0;i>e;++e)F[e]=t[F[e]];else F=null;q[q.indexOf($)]=T>1?(rn=c,$=l):1===T?(rn=h,$=s):rn=$=y}else if(1===T){if(tn)return;for(var e=0;J>e;++e)if(!S.zero(e))return;U=[],T=0,q[q.indexOf($)]=$=rn=y}}function l(r,n,t,i,o){if(!(r===V&&n===X||nn)){var u,f,a,l,s;if(e){for(u=0,l=t.length;l>u;++u)if(S.zeroExcept(a=t[u],X,W))for(f=0;f<F[a].length;f++)s=U[F[a][f]],s.value=I(s.value,_[a],!1,f);for(u=0,l=i.length;l>u;++u)if(S.onlyExcept(a=i[u],X,W,n,r))for(f=0;f<F[a].length;f++)s=U[F[a][f]],s.value=K(s.value,_[a],o,f)}else{for(u=0,l=t.length;l>u;++u)S.zeroExcept(a=t[u],X,W)&&(s=U[F[a]],s.value=I(s.value,_[a],!1));for(u=0,l=i.length;l>u;++u)S.onlyExcept(a=i[u],X,W,n,r)&&(s=U[F[a]],s.value=K(s.value,_[a],o))}}}function s(r,n,t,e,i){if(!(r===V&&n===X||nn)){var o,u,f,a=U[0];for(o=0,f=t.length;f>o;++o)S.zeroExcept(u=t[o],X,W)&&(a.value=I(a.value,_[u],!1));for(o=0,f=e.length;f>o;++o)S.onlyExcept(u=e[o],X,W,n,r)&&(a.value=K(a.value,_[u],i))}}function c(){var r,n,t;for(r=0;T>r;++r)U[r].value=L();if(e){for(r=0;J>r;++r)for(n=0;n<F[r].length;n++)t=U[F[r][n]],t.value=I(t.value,_[r],!0,n);for(r=0;J>r;++r)if(!S.zeroExcept(r,X,W))for(n=0;n<F[r].length;n++)t=U[F[r][n]],t.value=K(t.value,_[r],!1,n)}else{for(r=0;J>r;++r)t=U[F[r]],t.value=I(t.value,_[r],!0);for(r=0;J>r;++r)S.zeroExcept(r,X,W)||(t=U[F[r]],t.value=K(t.value,_[r],!1))}}function h(){var r,n=U[0];for(n.value=L(),r=0;J>r;++r)n.value=I(n.value,_[r],!0);for(r=0;J>r;++r)S.zeroExcept(r,X,W)||(n.value=K(n.value,_[r],!1))}function v(){return nn&&(rn(),nn=!1),U}function p(r){var n=G(v(),0,U.length,r);return H.sort(n,0,n.length)}function g(r,n,t){return I=r,K=n,L=t,nn=!0,C}function d(){return g(x,m,b)}function k(r){return g(z(r),E(r),b)}function w(r){function n(n){return r(n.value)}return G=u(n),H=o(n),C}function O(){return w(n)}function j(){return T}function N(){var r=q.indexOf($);return r>=0&&q.splice(r,1),r=sn.indexOf(f),r>=0&&sn.splice(r,1),r=R.indexOf(a),r>=0&&R.splice(r,1),C}var C={top:p,all:v,reduce:g,reduceCount:d,reduceSum:k,order:w,orderNatural:O,size:j,dispose:N,remove:N};cn.push(C);var U,F,G,H,I,K,L,P=8,Q=M(P),T=0,$=y,rn=y,nn=!0,tn=r===y;return arguments.length<1&&(r=n),q.push($),sn.push(f),R.push(a),f(Y,Z,0,J),d().orderNatural()}function Q(){var r=P(y),n=r.all;return delete r.all,delete r.top,delete r.order,delete r.orderNatural,delete r.size,r.value=function(){return n()[0].value},r}function T(){cn.forEach(function(r){r.dispose()});var r=F.indexOf(f);return r>=0&&F.splice(r,1),r=F.indexOf(s),r>=0&&F.splice(r,1),r=R.indexOf(c),r>=0&&R.splice(r,1),S.masks[X]&=W,G()}var V,W,X,Y,Z,$,rn,nn,tn,en,on,un,fn={filter:v,filterExact:w,filterRange:U,filterFunction:H,filterAll:G,top:K,bottom:L,group:P,groupAll:Q,dispose:T,remove:T},an=a(function(r){return nn[r]}),ln=d,sn=[],cn=[],hn=0,vn=0,pn=0;F.unshift(f),F.push(s),R.push(c);var gn=S.add();return X=gn.offset,V=gn.one,W=~V,f(_,0,J),s(_,0,J),fn}function s(){function r(r,n){var t;if(!v)for(t=n;J>t;++t)a=l(a,_[t],!0),S.zero(t)||(a=s(a,_[t],!1))}function n(r,n,t,e,i){var o,u,f;if(!v){for(o=0,f=t.length;f>o;++o)S.zero(u=t[o])&&(a=l(a,_[u],i));for(o=0,f=e.length;f>o;++o)S.only(u=e[o],n,r)&&(a=s(a,_[u],i))}}function t(){var r;for(a=c(),r=0;J>r;++r)a=l(a,_[r],!0),S.zero(r)||(a=s(a,_[r],!1))}function e(r,n,t){return l=r,s=n,c=t,v=!0,h}function i(){return e(x,m,b)}function o(r){return e(z(r),E(r),b)}function u(){return v&&(t(),v=!1),a}function f(){var t=q.indexOf(n);return t>=0&&q.splice(t),t=F.indexOf(r),t>=0&&F.splice(t),h}var a,l,s,c,h={reduce:e,reduceCount:i,reduceSum:o,value:u,dispose:f,remove:f},v=!0;return q.push(n),F.push(r),r(_,0,J),i()}function c(){return J}function h(){return _}function w(r){return"function"!=typeof r?(console.warn("onChange callback parameter must be a function!"),void 0):(G.push(r),function(){G.splice(G.indexOf(r),1)})}function C(){for(var r=0;r<G.length;r++)G[r]()}var S,U={add:r,remove:e,dimension:f,groupAll:s,size:c,all:h,onChange:w},_=[],J=0,q=[],F=[],R=[],G=[];return S=new v(0),arguments.length?r(arguments[0]):U}function A(r,n){return(257>n?q:65537>n?F:R)(r)}function O(r){for(var n=A(r,r),t=-1;++t<r;)n[t]=t;return n}function M(r){return 8===r?256:16===r?65536:4294967296}w.version="2.0.0-alpha.03",w.permute=t;var N=w.bisect=e(n);N.by=e;var C=w.heap=o(n);C.by=o;var S=w.heapselect=u(n);S.by=u;var U=w.insertionsort=f(n);U.by=f;var _=w.quicksort=a(n);_.by=a;var J=32,q=s,F=s,R=s,B=c,D=h;"undefined"!=typeof Uint8Array&&(q=function(r){return new Uint8Array(r)},F=function(r){return new Uint16Array(r)},R=function(r){return new Uint32Array(r)},B=function(r,n){if(r.length>=n)return r;var t=new r.constructor(n);return t.set(r),t},D=function(r,n){var t;switch(n){case 16:t=F(r.length);break;case 32:t=R(r.length);break;default:throw Error("invalid array width!")}return t.set(r),t}),v.prototype.lengthen=function(r){var n,t;for(n=0,t=this.subarrays;t>n;++n)this[n]=B(this[n],r);this.length=r},v.prototype.add=function(){var r,n,t,e,i;for(e=0,i=this.subarrays;i>e;++e)if(r=this.masks[e],n=this.width-32*e,t=~r&-~r,!(n>=32)||t)return 32>n&&t&1<<n&&(this[e]=D(this[e],n<<=1),this.width=32*e+n),this.masks[e]|=t,{offset:e,one:t};return this[this.subarrays]=q(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},v.prototype.copy=function(r,n){var t,e;for(t=0,e=this.subarrays;e>t;++t)this[t][r]=this[t][n]},v.prototype.truncate=function(r){var n,t;for(n=0,t=this.subarrays;t>n;++n){for(var e=this.length-1;e>=r;e--)this[n][e]=0;this[n].length=r}this.length=r},v.prototype.zero=function(r){var n,t;for(n=0,t=this.subarrays;t>n;++n)if(this[n][r])return!1;return!0},v.prototype.zeroExcept=function(r,n,t){var e,i;for(e=0,i=this.subarrays;i>e;++e)if(e===n?this[e][r]&t:this[e][r])return!1;return!0},v.prototype.only=function(r,n,t){var e,i;for(e=0,i=this.subarrays;i>e;++e)if(this[e][r]!=(e===n?t:0))return!1;return!0},v.prototype.onlyExcept=function(r,n,t,e,i){var o,u,f;for(u=0,f=this.subarrays;f>u;++u)if(o=this[u][r],u===n&&(o&=t),o!=(u===e?i:0))return!1;return!0},r.crossfilter=w}("undefined"!=typeof exports&&exports||this);