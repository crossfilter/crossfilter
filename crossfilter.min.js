!function(r){function n(r){return r}function e(r,n){for(var t=0,e=n.length,o=Array(e);e>t;++t)o[t]=r[n[t]];return o}function o(r){function n(n,t,e,o){for(;o>e;){var u=e+o>>>1;r(n[u])<t?e=u+1:o=u}return e}function t(n,t,e,o){for(;o>e;){var u=e+o>>>1;t<r(n[u])?o=u:e=u+1}return e}return t.right=t,t.left=n,t}function u(r){function n(r,n,t){for(var o=t-n,u=(o>>>1)+1;--u>0;)e(r,u,o,n);return r}function t(r,n,t){for(var o,u=t-n;--u>0;)o=r[n],r[n]=r[n+u],r[n+u]=o,e(r,1,u,n);return r}function e(n,t,e,o){for(var u,i=n[--o+t],f=r(i);(u=t<<1)<=e&&(e>u&&r(n[o+u])>r(n[o+u+1])&&u++,!(f<=r(n[o+u])));)n[o+t]=n[o+u],t=u;n[o+t]=i}return n.sort=t,n}function f(r){function n(n,e,o,u){var i,f,a,c,s=Array(u=Math.min(o-e,u));for(f=0;u>f;++f)s[f]=n[e++];if(t(s,0,u),o>e){i=r(s[0]);do(a=r(c=n[e])>i)&&(s[0]=c,i=r(t(s,0,u)[0]));while(++e<o)}return s}var t=u(r);return n}function a(r){function n(n,t,e){for(var o=t+1;e>o;++o){for(var u=o,i=n[o],f=r(i);u>t&&r(n[u-1])>f;--u)n[u]=n[u-1];n[u]=i}return n}return n}function c(r){function n(r,n,o){return(q>o-n?e:t)(r,n,o)}function t(t,e,o){var u,i=0|(o-e)/6,f=e+i,a=o-1-i,c=e+o-1>>1,s=c-i,l=c+i,h=t[f],v=r(h),p=t[s],d=r(p),g=t[c],y=r(g),b=t[l],x=r(b),k=t[a],m=r(k);v>d&&(u=h,h=p,p=u,u=v,v=d,d=u),x>m&&(u=b,b=k,k=u,u=x,x=m,m=u),v>y&&(u=h,h=g,g=u,u=v,v=y,y=u),d>y&&(u=p,p=g,g=u,u=d,d=y,y=u),v>x&&(u=h,h=b,b=u,u=v,v=x,x=u),y>x&&(u=g,g=b,b=u,u=y,y=x,x=u),d>m&&(u=p,p=k,k=u,u=d,d=m,m=u),d>y&&(u=p,p=g,g=u,u=d,d=y,y=u),x>m&&(u=b,b=k,k=u,u=x,x=m,m=u);var z=p,E=d,w=b,A=x;t[f]=h,t[s]=t[e],t[c]=g,t[l]=t[o-1],t[a]=k;var O=e+1,j=o-2,C=A>=E&&E>=A;if(C)for(var M=O;j>=M;++M){var U=t[M],N=r(U);if(E>N)M!==O&&(t[M]=t[O],t[O]=U),++O;else if(N>E)for(;;){var I=r(t[j]);{if(!(I>E)){if(E>I){t[M]=t[O],t[O++]=t[j],t[j--]=U;break}t[M]=t[j],t[j--]=U;break}j--}}}else for(var M=O;j>=M;M++){var U=t[M],N=r(U);if(E>N)M!==O&&(t[M]=t[O],t[O]=U),++O;else if(N>A)for(;;){var I=r(t[j]);{if(!(I>A)){E>I?(t[M]=t[O],t[O++]=t[j],t[j--]=U):(t[M]=t[j],t[j--]=U);break}if(j--,M>j)break}}}if(t[e]=t[O-1],t[O-1]=z,t[o-1]=t[j+1],t[j+1]=w,n(t,e,O-1),n(t,j+2,o),C)return t;if(f>O&&j>a){for(var S,I;(S=r(t[O]))<=E&&S>=E;)++O;for(;(I=r(t[j]))<=A&&I>=A;)--j;for(var M=O;j>=M;M++){var U=t[M],N=r(U);if(E>=N&&N>=E)M!==O&&(t[M]=t[O],t[O]=U),O++;else if(A>=N&&N>=A)for(;;){var I=r(t[j]);{if(!(A>=I&&I>=A)){E>I?(t[M]=t[O],t[O++]=t[j],t[j--]=U):(t[M]=t[j],t[j--]=U);break}if(j--,M>j)break}}}}return n(t,O,j+1)}var e=a(r);return n}function s(r){for(var n=Array(r),t=-1;++t<r;)n[t]=0;return n}function h(r,n){for(var t=r.length;n>t;)r[t++]=0;return r}function v(r,n){if(n>32)throw Error("invalid array width!");return r}function p(r){this.length=r,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=F(r)}function d(r,n){return function(t){var e=t.length;return[r.left(t,n,0,e),r.right(t,n,0,e)]}}function g(r,n){var t=n[0],e=n[1];return function(n){var o=n.length;return[r.left(n,t,0,o),r.left(n,e,0,o)]}}function y(r){return[0,r.length]}function b(){return null}function x(){return 0}function m(r){return r+1}function z(r){return r-1}function E(r){return function(n,t){return n+ +r(t)}}function w(r){return function(n,t){return n-r(t)}}function A(){function r(r){var n=q,t=r.length;return t&&(T=T.concat(r),I.lengthen(q+=t),R.forEach(function(e){e(r,n,t)}),N()),S}function o(){for(var r=O(q,q),n=[],t=0,e=0;q>t;++t)I.zero(t)?n.push(t):r[t]=e++;F.forEach(function(r){r(-1,-1,[],n,!0)}),V.forEach(function(n){n(r)});for(var t=0,e=0;q>t;++t)I.zero(t)||(t!==e&&(I.copy(e,t),T[e]=T[t]),++e);T.length=q=e,I.truncate(e),N()}function a(r,o){function a(n,u,f){if(o){for(t=0,j=0,k=[],i=0;i<n.length;i++)for(k=r(n[i]),j=0;j<k.length;j++)t++;rn=[],tn=C(q);var a=C(t);for(l=0,i=0;i<n.length;i++)for(k=r(n[i]),tn[i]=k.length,j=0;j<k.length;j++)rn.push(k[j]),a[l]=i,l++;var c=un(C(t),0,t);rn=e(rn,c),nn=e(a,c),console.log("newValues",rn),console.log("newIndex",nn),console.log("iterablesIndexCount",tn)}else rn=n.map(r),nn=un(C(f),0,f),rn=e(rn,nn);var s=fn(rn),h=s[0],v=s[1];if(en)for(i=0;f>i;++i)en(rn[i],i)||(I[Z][nn[i]+u]|=X);else{for(i=0;h>i;++i)I[Z][nn[i]+u]|=X;for(i=v;f>i;++i)I[Z][nn[i]+u]|=X}if(!u)return $=rn,_=nn,sn=h,ln=v,void 0;var p=$,d=_,g=0,y=0;for($=Array(q),_=O(q,q),i=0;u>g&&f>y;++i)p[g]<rn[y]?($[i]=p[g],_[i]=d[g++]):($[i]=rn[y],_[i]=nn[y++]+u);for(;u>g;++g,++i)$[i]=p[g],_[i]=d[g];for(;f>y;++y,++i)$[i]=rn[y],_[i]=nn[y]+u;s=fn($),sn=s[0],ln=s[1]}function s(r,n,t){an.forEach(function(r){r(rn,nn,n,t)}),rn=nn=null}function h(r){for(var n,t=0,e=0;q>t;++t)I.zero(n=_[t])||(t!==e&&($[e]=$[t]),_[e]=r[n],++e);for($.length=e;q>e;)_[e++]=0;var o=fn($);sn=o[0],ln=o[1]}function v(r){var n=r[0],t=r[1];if(en)return en=null,J(function(r,e){return e>=n&&t>e}),sn=n,ln=t,on;var e,u,i,f=[],a=[];if(sn>n)for(e=n,u=Math.min(sn,t);u>e;++e)I[Z][i=_[e]]^=X,f.push(i);else if(n>sn)for(e=sn,u=Math.min(n,ln);u>e;++e)I[Z][i=_[e]]^=X,a.push(i);if(t>ln)for(e=Math.max(n,ln),u=t;u>e;++e)I[Z][i=_[e]]^=X,f.push(i);else if(ln>t)for(e=Math.max(sn,t),u=ln;u>e;++e)I[Z][i=_[e]]^=X,a.push(i);if(o){var c={};for(e=0;e<f.length;e++)c[f[e]]=c[f[e]]||0,c[f[e]]++;var s={};for(e=0;e<a.length;e++)s[a[e]]=s[a[e]]||0,s[a[e]]++;for(e=0;e<tn.length;e++)c[e]=tn[e]-c[e],s[e]=tn[e]-s[e];console.log("addedTotals",c),console.log("removedTotals",s)}return sn=n,ln=t,F.forEach(function(r){r(X,Z,f,a)}),N(),on}function p(r){return null==r?G():Array.isArray(r)?S(r):"function"==typeof r?H(r):A(r)}function A(r){return v((fn=d(U,r))($))}function S(r){return v((fn=g(U,r))($))}function G(){return v((fn=y)($))}function H(r){return fn=y,J(en=r),sn=0,ln=q,on}function J(r){var n,t,e,o=[],u=[];for(n=0;q>n;++n)!(I[Z][t=_[n]]&X)^!!(e=r($[n],n))&&(e?(I[Z][t]&=Y,o.push(t)):(I[Z][t]|=X,u.push(t)));F.forEach(function(r){r(X,Z,o,u)}),N()}function K(r){var n,t=[],e=ln;if(o){for(;--e>=sn&&r>0;)I.zero(n=_[e])&&(t.push(T[n]),--r);return t}for(;--e>=sn&&r>0;)I.zero(n=_[e])&&(t.push(T[n]),--r);return t}function L(r){for(var n,t=[],e=sn;ln>e&&r>0;)I.zero(n=_[e])&&(t.push(T[n]),--r),e++;return t}function P(r){function t(n,t,e,u){function f(){++K===J&&(y=D(y,H<<=1),C=D(C,H),J=M(H))}var s,l,h,v,p,d,g=j,y=O(K,J),x=S,k=R,m=G,z=K,E=0,w=0;for(Q&&(x=m=b),Q&&(k=m=b),j=Array(K),K=0,C=z>1?B(C,q):O(q,J),z&&(h=(l=g[0]).key);u>w&&!((v=r(n[w]))>=v);)++w;for(;u>w;){for(l&&v>=h?(p=l,d=h,y[E]=K,(l=g[++E])&&(h=l.key)):(p={key:v,value:m()},d=v),j[K]=p;!(v>d||(C[s=t[w]+e]=K,p.value=x(p.value,T[s],!0),I.zeroExcept(s,Z,Y)||(p.value=k(p.value,T[s],!1)),++w>=u));)v=r(n[w]);f()}for(;z>E;)j[y[E]=K]=g[E++],f();if(K>E)for(E=0;e>E;++E)C[E]=y[C[E]];s=F.indexOf(L),K>1?(L=o,P=a):(!K&&W&&(K=1,j=[{key:null,value:m()}]),1===K?(L=i,P=c):(L=b,P=b),C=null),F[s]=L}function e(){if(K>1){for(var r=K,n=j,t=O(r,r),e=0,u=0;q>e;++e)I.zero(e)||(t[C[u]=C[e]]=1,++u);for(j=[],K=0,e=0;r>e;++e)t[e]&&(t[e]=K++,j.push(n[e]));if(K>1)for(var e=0;u>e;++e)C[e]=t[C[e]];else C=null;F[F.indexOf(L)]=K>1?(P=a,L=o):1===K?(P=c,L=i):P=L=b}else if(1===K){if(W)return;for(var e=0;q>e;++e)if(!I.zero(e))return;j=[],K=0,F[F.indexOf(L)]=L=P=b}}function o(r,n,t,e,o){if(!(r===X&&n===Z||Q)){var u,i,f,a;for(u=0,f=t.length;f>u;++u)I.zeroExcept(i=t[u],Z,Y)&&(a=j[C[i]],a.value=S(a.value,T[i]));for(u=0,f=e.length;f>u;++u)I.onlyExcept(i=e[u],Z,Y,n,r)&&(a=j[C[i]],a.value=R(a.value,T[i],o))}}function i(r,n,t,e,o){if(!(r===X&&n===Z||Q)){var u,i,f,a=j[0];for(u=0,f=t.length;f>u;++u)I.zeroExcept(i=t[u],Z,Y)&&(a.value=S(a.value,T[i]));for(u=0,f=e.length;f>u;++u)I.onlyExcept(i=e[u],Z,Y,n,r)&&(a.value=R(a.value,T[i],o))}}function a(){var r,n;for(r=0;K>r;++r)j[r].value=G();for(r=0;q>r;++r)n=j[C[r]],n.value=S(n.value,T[r],!0);for(r=0;q>r;++r)I.zeroExcept(r,Z,Y)||(n=j[C[r]],n.value=R(n.value,T[r],!1))}function c(){var r,n=j[0];for(n.value=G(),r=0;q>r;++r)n.value=S(n.value,T[r],!0);for(r=0;q>r;++r)I.zeroExcept(r,Z,Y)||(n.value=R(n.value,T[r],!1))}function s(){return Q&&(P(),Q=!1),j}function l(r){var n=U(s(),0,j.length,r);return N.sort(n,0,n.length)}function h(r,n,t){return S=r,R=n,G=t,Q=!0,A}function v(){return h(m,z,x)}function p(r){return h(E(r),w(r),x)}function d(r){function n(n){return r(n.value)}return U=f(n),N=u(n),A}function g(){return d(n)}function y(){return K}function k(){var r=F.indexOf(L);return r>=0&&F.splice(r,1),r=an.indexOf(t),r>=0&&an.splice(r,1),r=V.indexOf(e),r>=0&&V.splice(r,1),A}var A={top:l,all:s,reduce:h,reduceCount:v,reduceSum:p,order:d,orderNatural:g,size:y,dispose:k,remove:k};cn.push(A);var j,C,U,N,S,R,G,H=8,J=M(H),K=0,L=b,P=b,Q=!0,W=r===b;return arguments.length<1&&(r=n),F.push(L),an.push(t),V.push(e),t($,_,0,q),v().orderNatural()}function Q(){var r=P(b),n=r.all;return delete r.all,delete r.top,delete r.order,delete r.orderNatural,delete r.size,r.value=function(){return n()[0].value},r}function W(){cn.forEach(function(r){r.dispose()});var r=R.indexOf(a);return r>=0&&R.splice(r,1),r=R.indexOf(s),r>=0&&R.splice(r,1),r=V.indexOf(h),r>=0&&V.splice(r,1),I.masks[Z]&=Y,G()}var X,Y,Z,$,_,rn,nn,tn,en,on={filter:p,filterExact:A,filterRange:S,filterFunction:H,filterAll:G,top:K,bottom:L,group:P,groupAll:Q,dispose:W,remove:W},un=c(function(r){return rn[r]}),fn=y,an=[],cn=[],sn=0,ln=0;R.unshift(a),R.push(s),V.push(h);var hn=I.add();return Z=hn.offset,X=hn.one,Y=~X,a(T,0,q),s(T,0,q),on}function s(){function r(r,n){var t;if(!v)for(t=n;q>t;++t)a=c(a,T[t],!0),I.zero(t)||(a=s(a,T[t],!1))}function n(r,n,t,e,o){var u,i,f;if(!v){for(u=0,f=t.length;f>u;++u)I.zero(i=t[u])&&(a=c(a,T[i],o));for(u=0,f=e.length;f>u;++u)I.only(i=e[u],n,r)&&(a=s(a,T[i],o))}}function t(){var r;for(a=l(),r=0;q>r;++r)a=c(a,T[r],!0),I.zero(r)||(a=s(a,T[r],!1))}function e(r,n,t){return c=r,s=n,l=t,v=!0,h}function o(){return e(m,z,x)}function u(r){return e(E(r),w(r),x)}function i(){return v&&(t(),v=!1),a}function f(){var t=F.indexOf(n);return t>=0&&F.splice(t),t=R.indexOf(r),t>=0&&R.splice(t),h}var a,c,s,l,h={reduce:e,reduceCount:o,reduceSum:u,value:i,dispose:f,remove:f},v=!0;return F.push(n),R.push(r),r(T,0,q),o()}function h(){return q}function v(){return T}function A(r){return"function"!=typeof r?(console.warn("onChange callback parameter must be a function!"),void 0):(G.push(r),function(){G.splice(G.indexOf(r),1)})}function N(){for(var r=0;r<G.length;r++)G[r]()}var I,S={add:r,remove:o,dimension:a,groupAll:s,size:h,all:v,onChange:A},T=[],q=0,F=[],R=[],V=[],G=[];return I=new p(0),arguments.length?r(arguments[0]):S}function O(r,n){return(257>n?F:65537>n?R:V)(r)}function C(r){for(var n=O(r,r),t=-1;++t<r;)n[t]=t;return n}function M(r){return 8===r?256:16===r?65536:4294967296}A.version="2.0.0-alpha.03",A.permute=e;var U=A.bisect=o(n);U.by=o;var N=A.heap=u(n);N.by=u;var I=A.heapselect=f(n);I.by=f;var S=A.insertionsort=a(n);S.by=a;var T=A.quicksort=c(n);T.by=c;var q=32,F=s,R=s,V=s,B=h,D=v;"undefined"!=typeof Uint8Array&&(F=function(r){return new Uint8Array(r)},R=function(r){return new Uint16Array(r)},V=function(r){return new Uint32Array(r)},B=function(r,n){if(r.length>=n)return r;var t=new r.constructor(n);return t.set(r),t},D=function(r,n){var t;switch(n){case 16:t=R(r.length);break;case 32:t=V(r.length);break;default:throw Error("invalid array width!")}return t.set(r),t}),p.prototype.lengthen=function(r){var n,t;for(n=0,t=this.subarrays;t>n;++n)this[n]=B(this[n],r);this.length=r},p.prototype.add=function(){var r,n,t,e,o;for(e=0,o=this.subarrays;o>e;++e)if(r=this.masks[e],n=this.width-32*e,t=~r&-~r,!(n>=32)||t)return 32>n&&t&1<<n&&(this[e]=D(this[e],n<<=1),this.width=32*e+n),this.masks[e]|=t,{offset:e,one:t};return this[this.subarrays]=F(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},p.prototype.copy=function(r,n){var t,e;for(t=0,e=this.subarrays;e>t;++t)this[t][r]=this[t][n]},p.prototype.truncate=function(r){var n,t;for(n=0,t=this.subarrays;t>n;++n){for(var e=this.length-1;e>=r;e--)this[n][e]=0;this[n].length=r}this.length=r},p.prototype.zero=function(r){var n,t;for(n=0,t=this.subarrays;t>n;++n)if(this[n][r])return!1;return!0},p.prototype.zeroExcept=function(r,n,t){var e,o;for(e=0,o=this.subarrays;o>e;++e)if(e===n?this[e][r]&t:this[e][r])return!1;return!0},p.prototype.only=function(r,n,t){var e,o;for(e=0,o=this.subarrays;o>e;++e)if(this[e][r]!=(e===n?t:0))return!1;return!0},p.prototype.onlyExcept=function(r,n,t,e,o){var u,i,f;for(i=0,f=this.subarrays;f>i;++i)if(u=this[i][r],i===n&&(u&=t),u!=(i===e?o:0))return!1;return!0},r.crossfilter=A}("undefined"!=typeof exports&&exports||this);